<!DOCTYPE html>
<!-- saved from url=(0060)http://www.domaindesign.ca/vanarts/api2014Q4/10/project.html -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>project.html</title>
<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="row">
        <div class="col-md-8 col-md-offset-2">
        	<h1>Final Project</h1>
            <h2>Assignment</h2>
            <div class="panel-group" id="accordion" role="tablist" aria-multiselectable="true">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-1">
                        <h3 class="panel-title">
                            <a data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-1" aria-expanded="false" aria-controls="collapsible-item-1">Goal</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-1" class="panel-collapse collapse in" role="tabpanel" aria-labelledby="heading-1">
                        <p>As a user, I want to have fun answering an interactive quiz, and I expect the result to be based on my selections.</p>
                        <p>As a dev, I want to query Flickr JS API for photos based on my quiz topic.</p>
                        <p>As a dev, I want to query Facebook's Graph API for fans based on my quiz topic.</p>
                        <p>As a dev, I want to query Twitter's JS API for keyword search (with relative date) quiz topic.</p>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-2">
                        <h3 class="panel-title">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-2" aria-expanded="false" aria-controls="collapsible-item-2">Inspiration</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-2" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-2">
                        <p>Interactive quizes by <a href="http://www.buzzfeed.com/quizzes">Buzzfeed</a></p>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-3">
                        <h3 class="panel-title">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-3" aria-expanded="false" aria-controls="collapsible-item-3">Expectations</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-3" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-3">
                        <ul>
                            <li>Build a dynamic quiz with three questions. After the user submits the quiz the result should be reveal on the same page, below the questions. <i>(for 6 points)</i></li>
                            <li>The result is a fun conclusion to the user's answers based on your questions.</li>
                            <li>If the quiz is reloaded and completed a second time with non-repeatitive answers then the result should reflect the questions.</li>
                        </ul>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-4">
                        <h3 class="panel-title">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-4" aria-expanded="false" aria-controls="collapsible-item-4">Interactive quiz steps</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-4" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-4">
                        <ol>
                            <li>Display exactly 4 Flickr photos. Query Flickr by any criterion. <i>(for 4 points)</i></li>
                            <li>Display ~4 profile photos of a Facebook Page based on the photo likes. There are Page fans that like photos, display those user's profile photos. Any Facebook Page is allowed if it has those required fans. <i>(for 4 points)</i></li>
                            <li>Display exactly 4 Twitter tweets (status updates) with relative date (i.e. yesterday, 4 weeks ago). Query Twitter by any criterion. <i>(for 6 points)</i></li>
                        </ol>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-5">
                        <h3 class="panel-title">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-5" aria-expanded="false" aria-controls="collapsible-item-5">Technologies</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-5" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-5">
                        <ul>
                            <li><a href="https://www.flickr.com/services/api/">Flickr JS API</a></li>
                            <li><a href="https://developers.facebook.com/docs/graph-api">Facebook Graph API</a></li>
                            <li><a href="https://dev.twitter.com/docs">Twitter JS API</a></li>
                            <li><a href="https://www.npmjs.com/package/twit">Twitter API client for node</a></li>
                            <li>JavaScript</li>
                            <li><a href="http://api.jquery.com/">jQuery</a></li>
                            <li><a href="http://api.jquery.com/jQuery.ajax/">jQuery AJAX</a></li>
                            <li><a href="http://nodejs.org/">node.js</a></li>
                            <li><a href="http://hapijs.com/">hapi.js</a></li>
                        </ul>
                    </div>
                </div>

                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="heading-6">
                        <h3 class="panel-title">
                            <a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#collapsible-item-6" aria-expanded="false" aria-controls="collapsible-item-6">Grading</a>
                        </h3>
                    </div>
                    <div id="collapsible-item-6" class="panel-collapse collapse" role="tabpanel" aria-labelledby="heading-6">
                        <ul>
                            <li>For point breakdown consult the <a href="http://www.domaindesign.ca/vanarts/api2014Q4/10/project.html#Expectations">Expectations</a> section. <i>3 additional points</i> for completing all of the expectations.  For a total of twenty five points for this final project.</li>
                            <li>Deadline is Feb 27th at 23:59 Pacific.  <b>Submission details</b> <i>2 points</i> will be provided for an on-time delivery to <a href="mailto:dan@vanarts.com">dan@vanarts.com</a>.  2 points will be deducted from your total for every late 24-hour day.</li>
                        </ul>
                    </div>
                </div>
            </div>

            <h2>Live</h2>
            <style>
            label > img {
                width: 200px;
                height: 200px;
            }
            label > input {
                visibility: hidden;
                position: absolute;
            }
            label > input + img, label > input + div {
                cursor: pointer;
                border: 2px solid transparent;
            }
            label > input:checked + img, label > input:checked + div {
                cursor: pointer;
                border: 2px solid #f00;                
            }
            #result-section {
                visibility: hidden;
            }
            #result-section > .well > div {
                display: none;
            }
            </style>
            <div class="row">
                <div class="col-md-8 col-md-offset-2 well well-lg" id="flickr-section">
                    <div class="well well-lg">
                        Choose one from these images!
                    </div>
                    {#photos}
                        <div class="form-group col-md-6">
                            <label>
                                <input type="radio" name="q1" value="{index}">
                                <img src="{uri}" alt="">
                            </label>
                        </div>
                    {/photos}
                </div>

                <div class="col-sm-12 col-md-8 col-md-offset-2 well well-lg" id="facebook-section">
                    <div class="well well-lg">
                        Choose one from these funs!
                    </div>
                    {#facebook}
                        <div class="form-group col-sm-6">
                            <label>
                                <input type="radio" name="q2" value="{index}">
                                <img src="{fb}" alt="">
                            </label>
                        </div>
                    {/facebook}                    
                </div>

                <div class="col-sm-12 col-md-8 col-md-offset-2 well well-lg" id="twitter-section">
                    <div class="well well-lg">
                        Choose one from these tweets!
                    </div>
                    {#twt}
                        <div class="form-group col-sm-6">
                            <label>
                                <input type="radio" name="q3" value="{index}">
                                <div>
                                    <h6 id="twitterDate{index}">{tweetDate}</h6>
                                    <p>{tweet}</p>
                                </div>
                            </label>
                        </div>
                    {/twt}
                </div>

                <div class="col-md-8 col-md-offset-2 text-center" id="result-alt">
                    <h2>Result will be here!</h2>
                </div>
                <div class="col-md-8 col-md-offset-2" id="result-section">
                    <div class="well well-lg">
                        Today's your lucky photo is here!
                        {#results}
                        <div id="result-image-{resCode}">
                            <img src="{result}" alt="">
                        </div>
                        {/results}
                    </div>
                </div>

            </div>
        </div>
    </div>
    <!-- import jQuery -->
    <script src="https://code.jquery.com/jquery-2.1.3.min.js"></script>
    <!-- import bootstrap -->
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>
    <!-- import Twitter date formatter -->
    <script src="./lib/fotmatTwitterDate.js"></script>
    <!-- custom code -->
    <script>
    var results = {q1: null, q2: null, q3: null},
    showAnswer = function(){
        /* show result section */
        $('#result-alt').css('display', 'none');
        $('#result-section').css('visibility', 'visible');

        /* generate a code by each answer */
        /* e.g.
          Question 1: Answer = '0'
          Question 2: Answer = '1'
          Question 3: Answer = '3'
          resultCode = 013

          It will match resCode which is generated in index.js */
        var resultCode = $.map(results, function(value) {
            return value;
        }).join("");

        /* TODO: Ask Dan, Should I use DOM tree? */
        /* reset the result */
        $('#result-section>.well>div').css('display', 'none');

        /* show the result based on the code which is just generated */
        $('#result-image-'+resultCode).css('display', 'block');
    },
    isAllAnswered = function(){
        /* If one of result is 'null', it returns false */
        var isAllAnswered = true;
        $.each(results, function(index, val) {
            if(val == null) {
                isAllAnswered = false;
            }
        });
        return isAllAnswered;
    },
    setResult = function(section, questionName){
        /* set an answer into results */
        results[questionName] = $('input[name="'+questionName+'"]:checked', section).val();
        isAllAnswered()?showAnswer():null;
    };

    /* TODO: Ask Dan, Can I improve them? */
    $('#flickr-section').on('change', function(){
        setResult(this, 'q1');
    });
    $('#facebook-section').on('change', function(){
        setResult(this, 'q2');
    });
    $('#twitter-section').on('change', function(){
        setResult(this, 'q3');
    });

    jQuery(document).ready(function($) {
        /* Reset all answers (remove red border lines) */
        $('.form-group').children('label').find("input:radio:checked").prop({checked: false});

        /* replace twitter date */
        var idName;
        for (var index = 0; index < 4; index++) {
            idName = '#twitterDate'+index;
            $(idName).html(formatTwitterDate($(idName).html()));
        };
    });
    </script>
</body>
</html>
